<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="Styles/style.css" rel="stylesheet" />
    <script src="Scripts/jquery-2.0.3.js"></script>
    <script src="Scripts/common.js"></script>
    <script src="Scripts/graphics.js"></script>
    <script src="Scripts/lsystem.js"></script>
    <script type="text/javascript">
        $(function () {
            var canvas = $('#drawCanvas')[0];

            var cxt = canvas.getContext('2d');

            var w = canvas.width;
            var h = canvas.height;
            cxt.strokeStyle = 'gray';

            cxt.beginPath();
            for (var x = 0; x < w; x += 10) {
                for (var y = 0; y < h; y += 10) {
                    cxt.moveTo(0, y);
                    cxt.lineTo(w, y);

                    cxt.moveTo(x, 0);
                    cxt.lineTo(x, h);
                }
            }
            cxt.stroke();
            cxt.closePath();

            var g = new Graphics(canvas);
            var ls = new LSystem();
            var expr = ls.generate('F', {
                'F': 'FF-[-F+F+F]+[+F-F-F]'
            }, 5);
            //expr = 'F[+F]F[+F][-F]'
            $('#generation').val(expr);
            ls.render(g, expr, {
                origin: { x: w / 2, y: h *0.8 },
                angle: 90,
                step: 7,
                deltaAngle: 22.5
            });
        });

    </script>
</head>
<body>
    <canvas id="drawCanvas" width="500" height="500" class="canvas"></canvas>
    <textarea id="generation" class="generation"></textarea>
</body>
</html>
